{% extends 'base.html' %}
{% load static %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ product.name }}</title>
    {% block style %}
        <link rel="stylesheet" href="{% static 'products/css/product_detail.css' %}">
        <link rel="stylesheet" href="{% static 'products/css/star_rating.css' %}">
    {% endblock %}
</head>
<body>
    <main>
        <div class="product-detail-container">
            <div class="product-image">
                <img src="{{ product.images.url }}" alt="{{ product.name }}">
            </div>
            <div class="product-details">
                <h1>{{ product.name }}</h1>
                <p>Category: {{ product.category }}</p>
                <p>Price: ${{ product.price }}</p>
                <p>Stock: {{ product.stock }}</p>
                <p>Description: {{ product.description }}</p>
                <!-- Star Rating -->
                <div class="star-rating">
                    <span class="fa fa-star" data-rating="1"></span>
                    <span class="fa fa-star" data-rating="2"></span>
                    <span class="fa fa-star" data-rating="3"></span>
                    <span class="fa fa-star" data-rating="4"></span>
                    <span class="fa fa-star" data-rating="5"></span>
                </div>
                <!-- Add to Cart Form -->
                <form action="{% url 'cart:add_to_cart' product.id %}" method="post" style="display: inline-block;">
                    {% csrf_token %}
                    <button type="submit" class="add-to-cart-btn">Add to Cart</button>
                </form>
                <button class="add-to-wishlist-btn" onclick="addToWishlist('{{ product.id|safe }}')" style="display: inline-block;">Add to Wishlist</button>
                <button class="back-to-products-btn" onclick="window.history.back()" style="display: inline-block;">Back to Products</button>
            </div>
        </div>
    </main>
    <script>
        // JavaScript for star rating
        document.addEventListener('DOMContentLoaded', function () {
            const stars = document.querySelectorAll('.fa-star');

            stars.forEach(function (star) {
                star.addEventListener('click', function () {
                    const rating = this.getAttribute('data-rating');
                    alert('User rated with ' + rating + ' stars.');
                    // You can send the rating to your server using AJAX here.
                });
            });
        });
    </script>
</body>
</html>
{% endblock %}
