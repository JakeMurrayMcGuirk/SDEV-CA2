{% extends 'base.html' %}
{% load static %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ product.name }}</title>
    {% block style %}
        <link rel="stylesheet" href="{% static 'products/css/product_detail.css' %}">
    {% endblock %}
</head>
<body>
    <main>
        <div class="product-detail-container">
            <div class="product-image">
                <img src="{{ product.images.url }}" alt="{{ product.name }}">
            </div>
            <div class="product-details">
                <h1>{{ product.name }}</h1>
                <p>Category: {{ product.category }}</p>
                <p>Price: ${{ product.price }}</p>
                <p>Stock: {{ product.stock }}</p>
                <p>Description: {{ product.description }}</p>
                <!-- Add to Cart Form -->
                <form action="{% url 'cart:add_to_cart' product.id %}" method="post" style="display: inline-block;">
                    {% csrf_token %}
                    <button type="submit" class="add-to-cart-btn">Add to Cart</button>
                </form>
                <button class="add-to-wishlist-btn" onclick="addToWishlist('{{ product.id|safe }}')" style="display: inline-block;">Add to Wishlist</button>
                <button class="back-to-products-btn" onclick="window.history.back()" style="display: inline-block;">Back to Products</button>
            </div>

            <h3>Leave a Review</h3>
            <form method="post" action="{% url 'submit_review' %}">
                {% csrf_token %}
                <div class="form-group">
                    <label for="rating">Rating</label>
                    <input type="number" name="rating" id="rating" min="1" max="5" required>
                </div>
                <div class="form-group">
                    <label for="review_text">Review</label>
                    <textarea name="review_text" id="review_text" rows="4" required></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Submit Review</button>
            </form>
        
            <!-- List of reviews -->
            <h3>Reviews</h3>
            <ul class="list-group">
                {% for review in product.product_reviews.all %}
                    <li class="list-group-item">
                        <h5>{{ review.user.username }}</h5>
                        <p>Rating: {{ review.rating }}/5</p>
                        <p>{{ review.review_text }}</p>
                    </li>
                {% endfor %}
            </ul>

        </div>
    </main>
</body>
</html>




{% endblock %}
